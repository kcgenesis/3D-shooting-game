<!DOCTYPE html>
<html>

	
	<!--<script id="vertex-shader" type="x-shader/x-vertex">

		attribute vec4 vPosition;
		uniform mat4 modelViewMatrix;
		uniform mat4 projectionMatrix;
		//uniform mat4 r_theta;
		void main()
		{

		    //gl_Position = r_theta*vPosition;
		    gl_Position=vPosition;
		    gl_Position = projectionMatrix*modelViewMatrix*gl_Position;
		    //gl_Position.z = -gl_Position.z;
		}
	</script>-->

	<script id="vertex-shader" type="x-shader/x-vertex">
	attribute  vec4 vPosition;
	attribute  vec3 vNormal;
	attribute  vec2 vTexCoord;

	varying vec4 fColor;
	varying vec2 fTexCoord;

	uniform vec4 ambientProduct, diffuseProduct, specularProduct;
	uniform mat4 modelViewMatrix;
	uniform mat4 projectionMatrix;
	uniform vec4 lightPosition;
	uniform float shininess;
	void main()
	{

	    
	    vec3 pos = -(modelViewMatrix * vPosition).xyz;
	    
	    //fixed light postion
	    
	    vec3 light = lightPosition.xyz;
	    vec3 L = normalize( light - pos );

		
	    vec3 E = normalize( -pos );
	    vec3 H = normalize( L + E );
	    
	    vec4 NN = vec4(vNormal,0);

	    // Transform vertex normal into eye coordinates
	       
	    vec3 N = normalize( (modelViewMatrix*NN).xyz);

	    // Compute terms in the illumination equation
	    vec4 ambient = ambientProduct;

	    float Kd = max( dot(L, N), 0.0 );
	    vec4  diffuse = Kd*diffuseProduct;

	    float Ks = pow( max(dot(N, H), 0.0), shininess );
	    vec4  specular = Ks * specularProduct;
	    
	    if( dot(L, N) < 0.0 ) {
		specular = vec4(0.0, 0.0, 0.0, 1.0);
	    } 

	    gl_Position = projectionMatrix * modelViewMatrix * vPosition;
	    fColor = ambient + diffuse +specular;
	    fTexCoord = vTexCoord;
	    fColor.a = 1.0;

	}
	</script>

	<script id="fragment-shader" type="x-shader/x-fragment">
		precision mediump float;
		varying  vec2 fTexCoord;
		uniform sampler2D texture;
		varying vec4 fColor;
		void
		main()
		{
		    gl_FragColor = fColor*texture2D(texture,fTexCoord);
		}
	</script>


	<script type="text/javascript" src="../Common/webgl-utils.js"></script>
	<script type="text/javascript" src="../Common/initShaders.js"></script>
	
	<script type="text/javascript" src="../Common/MV.js"></script>
	<script type="text/javascript" src="pic.js"></script>
	<script type="text/javascript" src="game.js"></script>

	<body>
		<canvas id="gl-canvas" width="700" height="512">
			Oops ... your browser doesn't support the HTML5 canvas element
		</canvas>
		<!--<button id = "inc_theta">Increase theta</button>
		<button id = "dec_theta">Decrease theta</button>
		<button id = "inc_phi">Increase phi</button>
		<button id = "dec_phi">Decrease phi</button>-->
		<h3>ESCAPED</h3>
		<div id="escaped"></div>
		<h3>ELIMINATED</h3>
		<div id="eliminated"></div>
		<h3>ACCURACY</h3>
		<div id="accuracy"></div>
		

	</body>
</html>
